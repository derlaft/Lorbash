#!/bin/bash

#viewpost.sh

source 'api/sqlite.sh'

function get_post {
  #avaiable rows are:
  # (id, title, body, type, globalparent, parent, data)
  
  #first, let's get and id
  post_id=$(make_number $1)
  
  #and check it
  if [ -z "$post_id" ]; then
    echo 'invalid number'
    exit
  fi
  
  #now, we can get post body
  body=$(sqlite3 "$DBFILE" "SELECT body FROM posts WHERE id='$post_id'")
  if [ -z "$body" ]; then 
    echo "no post"
    exit
  fi
  
  title=$(sqlite3 "$DBFILE" "SELECT title FROM posts WHERE id='$post_id'")
  parent=$(sqlite3 "$DBFILE" "SELECT parent FROM posts WHERE id='$post_id'")
  #unset vars
  unset post_id
  unset body
  unset type
  unset globalparent
  unset parent
  unset data
}
